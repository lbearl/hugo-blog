<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  A Gentle Introduction to Onion Architecture in ASP.NET MVC – Part 1 · Luke Bearl
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Luke Bearl">
<meta name="description" content="Welcome to part one of a multi part series on Enterprise Application in .Net Core! In this series we&rsquo;ll go over everything that is necessary to build a best in breed enterprise application with the Onion Architecture at its core. The word enterprise is integral in describing the software being described as it is going to be software which is capable of being extended year after year in a clean fashion while allowing things to stay DRY and testable. We&rsquo;ll cover the following:">
<meta name="keywords" content="blog,developer,personal,.net,c#,devops">
<meta name="fediverse:creator" content="" />


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="A Gentle Introduction to Onion Architecture in ASP.NET MVC – Part 1">
  <meta name="twitter:description" content="Welcome to part one of a multi part series on Enterprise Application in .Net Core! In this series we’ll go over everything that is necessary to build a best in breed enterprise application with the Onion Architecture at its core. The word enterprise is integral in describing the software being described as it is going to be software which is capable of being extended year after year in a clean fashion while allowing things to stay DRY and testable. We’ll cover the following:">

<meta property="og:url" content="http://localhost:1313/posts/gentle-introduction-1/">
  <meta property="og:site_name" content="Luke Bearl">
  <meta property="og:title" content="A Gentle Introduction to Onion Architecture in ASP.NET MVC – Part 1">
  <meta property="og:description" content="Welcome to part one of a multi part series on Enterprise Application in .Net Core! In this series we’ll go over everything that is necessary to build a best in breed enterprise application with the Onion Architecture at its core. The word enterprise is integral in describing the software being described as it is going to be software which is capable of being extended year after year in a clean fashion while allowing things to stay DRY and testable. We’ll cover the following:">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2016-09-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2016-09-19T00:00:00+00:00">




<link rel="canonical" href="http://localhost:1313/posts/gentle-introduction-1/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Luke Bearl
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/now/">Now</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="https://registry.jsonresume.org/lbearl?theme=professional">Resume</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/gentle-introduction-1/">
              A Gentle Introduction to Onion Architecture in ASP.NET MVC – Part 1
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2016-09-19T00:00:00Z">
                September 19, 2016
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              3-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/net/">Net</a>
      <span class="separator">•</span>
    <a href="/categories/architecture/">Architecture</a>
      <span class="separator">•</span>
    <a href="/categories/software-development/">Software-Development</a></div>

          
        </div>
      </header>

      <div class="post-content">
        
        <p>Welcome to part one of a multi part series on Enterprise Application in .Net Core! In this series we&rsquo;ll go over everything that is necessary to build a best in breed enterprise application with the <a href="http://jeffreypalermo.com/blog/the-onion-architecture-part-1/"  class="external-link" target="_blank" rel="noopener">Onion Architecture</a> at its core. The word enterprise is integral in describing the software being described as it is going to be software which is capable of being extended year after year in a clean fashion while allowing things to stay <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself"  class="external-link" target="_blank" rel="noopener">DRY</a> and testable. We&rsquo;ll cover the following:</p>
<ol>
<li>System to Design</li>
<li>Initial Architecture and Architectural Considerations</li>
<li>Proper Abstractions Around Each Layer of the &ldquo;Onion&rdquo;</li>
<li>Unit Testing</li>
</ol>
<p>This series of posts isn&rsquo;t going to exhaustively walk you through every decision that may need to be considered (i.e. we&rsquo;ll only very briefly discuss localization). My intention with these posts is to put forth my ideas of what a solid architecture looks like. With that being said, the application we are going to design is called &ldquo;Block List Checker&rdquo; which is an application which will allow one or more Email Service Providers (ESPs) such as <a href="https://www.mailgun.com"  class="external-link" target="_blank" rel="noopener">Mailgun</a>, <a href="https://www.sendgrid.com"  class="external-link" target="_blank" rel="noopener">SendGrid</a>, etc. to be queried simultaneously to return a list of all email addresses which are on a suppression list. This is a very simple application which is intentionally somewhat over-engineered for the purposes of illustrating the various components of the system.</p>
<h3 id="inversion-of-control-and-dependency-injection">
  Inversion of Control and Dependency Injection
  <a class="heading-link" href="#inversion-of-control-and-dependency-injection">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>In order to design this software appropriately there are several tools that will need to be incorporated into the solution. The first (and arguably the most important) of these is <a href="http://structuremap.github.io/"  class="external-link" target="_blank" rel="noopener">StructureMap</a> a .Net-friendly IoC/DI Container. For those not familiar: IoC (or Inversion of Control) and DI (or Dependency Injection) are design patterns which help make code much more testable. They do this by &ldquo;inverting&rdquo; the dependency chain. The way this plays out in MVC applications is that controllers will be injected with all of the dependencies that all of the services which are used by those controllers require. The IoC container will basically maintain a mapping of interfaces to services and, at runtime, will provide the controller with an instance of the service requested. Due to the fact that this effectively requires loose-coupling between components, writing unit tests becomes much easier (note that the description of IoC here is just barely skimming the surface, entire books have been written on this subject).</p>
<h3 id="unit-testing">
  Unit Testing
  <a class="heading-link" href="#unit-testing">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Because this application is so simple, I have opted not to write comprehensive tests around it, however I have written a few tests just to demonstrate using <a href="https://xunit.github.io/"  class="external-link" target="_blank" rel="noopener">xunit</a> with this application and how the loose coupling allows the testing to be achieved.</p>
<h3 id="known-issues">
  Known Issues
  <a class="heading-link" href="#known-issues">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>This application is very basic and the UI could use a bit of love. It currently targets Asp.Net MVC5 instead of .Net Core MVC6 due to the fact that I prefer writing API access code using RestSharp, and that currently doesn&rsquo;t seem compatible with .Net Core. I may release another sample project in the not distant future which targets .Net Core. It also currently doesn&rsquo;t make use of either a proper front end framework, or of most of the functionality that MVC5 exposes on the front end. I haven&rsquo;t written this application to be overly robust, and due to the nature of how it consumes API keys without any authentication I wouldn&rsquo;t expose it on a publicly facing web server.</p>
<h3 id="get-the-code">
  Get the code
  <a class="heading-link" href="#get-the-code">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>With all that being said, the code is available here: <a href="https://github.com/lbearl/BlockListChecker"  class="external-link" target="_blank" rel="noopener">https://github.com/lbearl/BlockListChecker</a>.</p>
<p>Part Two of the series is available <a href="/2016/10/gentle-introduction-2" >here</a></p>

      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
    <section class="container">
      ©
      
        2016 -
      
      2024
       Luke Bearl 
      · Made with <i class="fa-solid fa-heart"></i> in Minnesota
      
      
    </section>
  </footer>
  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
